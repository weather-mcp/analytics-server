# Production Environment Configuration Template
# Copy this file to .env on your production server and fill in the values
# DO NOT commit the actual .env file to git!

# =============================================================================
# Server Configuration
# =============================================================================
NODE_ENV=production
PORT=3000
LOG_LEVEL=info

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
# IMPORTANT: Set a strong password in production!
REDIS_PASSWORD=CHANGE_ME_STRONG_REDIS_PASSWORD
REDIS_DB=0

# =============================================================================
# PostgreSQL Configuration
# =============================================================================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=analytics
DB_USER=analytics
# IMPORTANT: Set a strong password in production!
DB_PASSWORD=CHANGE_ME_STRONG_DB_PASSWORD
DB_MAX_CONNECTIONS=20
DB_IDLE_TIMEOUT_MS=30000

# =============================================================================
# Queue Configuration
# =============================================================================
QUEUE_KEY=analytics:events
MAX_QUEUE_SIZE=10000
WORKER_POLL_INTERVAL_MS=1000
WORKER_BATCH_SIZE=50

# =============================================================================
# API Configuration
# =============================================================================
API_BODY_LIMIT_KB=100
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10
MAX_BATCH_SIZE=100

# =============================================================================
# Cache Configuration
# =============================================================================
CACHE_TTL_SECONDS=300
CACHE_ENABLED=true

# =============================================================================
# Monitoring - Prometheus
# =============================================================================
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# Monitoring - Grafana
# =============================================================================
GRAFANA_ADMIN_USER=admin
# IMPORTANT: Change the default Grafana password!
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_STRONG_GRAFANA_PASSWORD
GRAFANA_ROOT_URL=https://analytics.weather-mcp.dev

# =============================================================================
# Security
# =============================================================================
TRUST_PROXY=true

# CORS Configuration
# Production: Use your actual domain(s)
# Format: comma-separated list of origins
CORS_ORIGIN=https://weather-mcp.dev,https://analytics.weather-mcp.dev

# =============================================================================
# Data Retention (days)
# =============================================================================
RAW_EVENTS_RETENTION_DAYS=90
DAILY_AGGREGATIONS_RETENTION_DAYS=730
HOURLY_AGGREGATIONS_RETENTION_DAYS=30
ERROR_SUMMARY_RETENTION_DAYS=90

# =============================================================================
# Alerting - Email Configuration (Alertmanager)
# =============================================================================
# SMTP settings for alert notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_FROM=analytics-alerts@weather-mcp.dev
SMTP_USERNAME=your-email@gmail.com
# For Gmail, use an app-specific password
SMTP_PASSWORD=CHANGE_ME_SMTP_APP_PASSWORD

# Alert email recipients
ALERT_EMAIL_CRITICAL=ops@weather-mcp.dev
ALERT_EMAIL_WARNING=team@weather-mcp.dev

# =============================================================================
# Optional: Slack Integration
# =============================================================================
# Uncomment and configure if you want Slack notifications
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
# SLACK_CHANNEL=#alerts

# =============================================================================
# Optional: External Services
# =============================================================================
# Uncomment if using external monitoring services
# SENTRY_DSN=https://your-sentry-dsn
# DATADOG_API_KEY=your-datadog-api-key

# =============================================================================
# Security Checklist
# =============================================================================
# Before deploying to production, ensure you have:
# ✓ Changed all passwords marked with CHANGE_ME
# ✓ Set strong, unique passwords (20+ characters recommended)
# ✓ Configured CORS_ORIGIN with your actual domains
# ✓ Updated SMTP settings for alert notifications
# ✓ Reviewed and updated GRAFANA_ROOT_URL
# ✓ Verified all other settings match your infrastructure
